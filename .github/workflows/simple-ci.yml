name: Simple CI

on:
  push:
    branches: [ master, main ]
  pull_request:
    branches: [ master, main ]

jobs:
  test-python-312:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    
    - name: Setup Python 3.12
      uses: actions/setup-python@v5
      with:
        python-version: "3.12"
    
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install bitarray pytest pytest-cov
    
    - name: Run tests
      run: |
        python -m pytest test_filesystem.py test_advanced.py test_edge_cases.py -v
    
    - name: Test main program
      run: |
        echo -e "mkfs 5\ncreate test.txt\nls\nexit" | timeout 5 python main.py || echo "Done"
