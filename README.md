# üìÅ –§–∞–π–ª–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ - –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ4

[![Tests](https://github.com/user/filesystem/actions/workflows/tests.yml/badge.svg)](https://github.com/user/filesystem/actions/workflows/tests.yml)
[![Coverage](https://codecov.io/gh/user/filesystem/branch/master/graph/badge.svg)](https://codecov.io/gh/user/filesystem)
[![Python](https://img.shields.io/badge/Python-3.9%2B-blue.svg)](https://python.org)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏ –Ω–∞ Python –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –±–ª–æ–∫–æ–≤–æ–≥–æ –Ω–æ—Å—ñ—è, –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ñ–≤ —Ñ–∞–π–ª—ñ–≤ —Ç–∞ –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ—ó —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏ (VFS).

## üöÄ –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

- ‚úÖ **–ë–ª–æ–∫–æ–≤–∏–π –Ω–æ—Å—ñ–π** - —Ñ–∞–π–ª –Ω–∞ –¥–∏—Å–∫—É –∑ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–º–∏ –±–ª–æ–∫–∞–º–∏ 4KB
- ‚úÖ **Inode —Å–∏—Å—Ç–µ–º–∞** - –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∏ —Ñ–∞–π–ª—ñ–≤ –∑ –ø—Ä—è–º–∏–º–∏/–Ω–µ–ø—Ä—è–º–∏–º–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º–∏  
- ‚úÖ **–ë—ñ—Ç–æ–≤–∞ –∫–∞—Ä—Ç–∞** - –µ—Ñ–µ–∫—Ç–∏–≤–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –≤—ñ–ª—å–Ω–∏–º–∏ –±–ª–æ–∫–∞–º–∏
- ‚úÖ **VFS —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—è —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏
- ‚úÖ **–ñ–æ—Ä—Å—Ç–∫—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –∫—ñ–ª—å–∫–æ—Ö —ñ–º–µ–Ω –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É
- ‚úÖ **–ö–æ–Ω—Å–æ–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - –∑—Ä—É—á–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω–∏–π —Ä—è–¥–æ–∫

## üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
# –ö–ª–æ–Ω—É–≤–∞—Ç–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
git clone https://github.com/user/filesystem.git
cd filesystem

# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
pip install -r requirements.txt

# –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ make
make install
```

## üèÉ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ñ–∞–π–ª–æ–≤—É —Å–∏—Å—Ç–µ–º—É
python main.py

# –ê–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ make
make run
```

### –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:

```bash
> mkfs 10                # –°—Ç–≤–æ—Ä–∏—Ç–∏ –§–° –∑ 10 –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∞–º–∏
> create test.txt        # –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª
> open test.txt          # –í—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª (–æ—Ç—Ä–∏–º–∞—Ç–∏ fd)
fd = 0
> write 0                # –ó–∞–ø–∏—Å–∞—Ç–∏ –¥–∞–Ω—ñ —É —Ñ–∞–π–ª
–í–≤–µ–¥—ñ—Ç—å —Ç–µ–∫—Å—Ç –¥–ª—è –∑–∞–ø–∏—Å—É:
Hello, World!
–ó–∞–ø–∏—Å–∞–Ω–æ 13 –±–∞–π—Ç
> seek 0 0               # –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –ø–æ–∑–∏—Ü—ñ—é –Ω–∞ –ø–æ—á–∞—Ç–æ–∫
> read 0 13              # –ü—Ä–æ—á–∏—Ç–∞—Ç–∏ –¥–∞–Ω—ñ
–ü—Ä–æ—á–∏—Ç–∞–Ω–æ 13 –±–∞–π—Ç:
'Hello, World!'
> stat test.txt          # –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ñ–∞–π–ª
–§–∞–π–ª: test.txt
  Inode: 0
  –¢–∏–ø: file
  –ñ–æ—Ä—Å—Ç–∫—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è: 1
  –†–æ–∑–º—ñ—Ä: 13 –±–∞–π—Ç
  –ë–ª–æ–∫—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ: 1
> exit
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ —Ç–µ—Å—Ç–∏
make test

# –¢–µ—Å—Ç–∏ –∑ –ø–æ–∫—Ä–∏—Ç—Ç—è–º –∫–æ–¥—É
make test-cov

# –®–≤–∏–¥–∫—ñ —Ç–µ—Å—Ç–∏ (–ø–∞—Ä–∞–ª–µ–ª—å–Ω–æ)
make test-fast

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —è–∫–æ—Å—Ç—ñ –∫–æ–¥—É
make lint

# –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É
make format
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
src/
‚îú‚îÄ‚îÄ üìÑ block_device.py      # –ë–ª–æ–∫–æ–≤–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π
‚îú‚îÄ‚îÄ üìÑ filesystem.py        # –§–∞–π–ª–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞
‚îú‚îÄ‚îÄ üìÑ inode.py            # –î–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä–∏ —Ñ–∞–π–ª—ñ–≤
‚îú‚îÄ‚îÄ üìÑ open_file.py        # –í—ñ–¥–∫—Ä–∏—Ç—ñ —Ñ–∞–π–ª–∏  
‚îú‚îÄ‚îÄ üìÑ vfs.py              # –í—ñ—Ä—Ç—É–∞–ª—å–Ω–∞ –§–°
‚îú‚îÄ‚îÄ üìÑ main.py             # –ö–æ–Ω—Å–æ–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ üß™ test_filesystem.py   # –û—Å–Ω–æ–≤–Ω—ñ —Ç–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ üß™ test_advanced.py     # –†–æ–∑—à–∏—Ä–µ–Ω—ñ —Ç–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ ‚öôÔ∏è requirements.txt     # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ ‚öôÔ∏è pyproject.toml       # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ ‚öôÔ∏è Makefile            # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ üöÄ .github/workflows/   # CI/CD
```

## üìö API —Ç–∞ –∫–æ–º–∞–Ω–¥–∏

### –ö–æ–º–∞–Ω–¥–∏ —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏:

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å | –ü—Ä–∏–∫–ª–∞–¥ |
|---------|------|---------|
| `mkfs n` | –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –§–° | `mkfs 100` |
| `stat name` | –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ñ–∞–π–ª | `stat readme.txt` |
| `ls` | –°–ø–∏—Å–æ–∫ —Ñ–∞–π–ª—ñ–≤ | `ls` |
| `create name` | –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª | `create data.bin` |
| `open name` | –í—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª | `open data.bin` |
| `close fd` | –ó–∞–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª | `close 0` |
| `seek fd pos` | –ü–æ–∑–∏—Ü—ñ–æ–Ω—É–≤–∞–Ω–Ω—è | `seek 0 100` |
| `read fd size` | –ß–∏—Ç–∞–Ω–Ω—è | `read 0 1024` |
| `write fd` | –ó–∞–ø–∏—Å | `write 0` |
| `link old new` | –ñ–æ—Ä—Å—Ç–∫–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è | `link file.txt backup.txt` |
| `unlink name` | –í–∏–¥–∞–ª–∏—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è | `unlink backup.txt` |
| `truncate name size` | –ó–º—ñ–Ω–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä | `truncate file.txt 500` |

### Python API:

```python
from block_device import BlockDevice
from filesystem import FileSystem  
from vfs import VFS

# –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª–æ–≤—É —Å–∏—Å—Ç–µ–º—É
device = BlockDevice("storage.bin")
fs = FileSystem(device)
vfs = VFS(fs)

# –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏
vfs.mkfs(100)

# –°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª
vfs.create("example.txt")

# –í—ñ–¥–∫—Ä–∏—Ç–∏ —Ç–∞ –∑–∞–ø–∏—Å–∞—Ç–∏
fd = vfs.open("example.txt")
vfs.write(fd, b"Hello, World!")
vfs.close(fd)
```

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏:

- **–†–æ–∑–º—ñ—Ä –±–ª–æ–∫—É:** 4096 –±–∞–π—Ç (4KB)
- **–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±–ª–æ–∫—ñ–≤:** 1024 (4MB)
- **–ú–∞–∫—Å–∏–º—É–º –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ñ–≤:** –ù–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è (10-1000)
- **–ü—Ä—è–º—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:** 10 –±–ª–æ–∫—ñ–≤
- **–ù–µ–ø—Ä—è–º—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è:** 1 –±–ª–æ–∫ (–≤ —Ä–æ–∑—Ä–æ–±—Ü—ñ)

### –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≤ –∫–æ–¥—ñ:

```python
# –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–∏—Å—Ç—Ä—ñ–π –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
device = BlockDevice(
    filename="custom.bin",
    block_size=8192,      # 8KB –±–ª–æ–∫–∏
    total_blocks=2048     # 16MB –∑–∞–≥–∞–ª–æ–º
)

# –§–° –∑ –±—ñ–ª—å—à–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –¥–µ—Å–∫—Ä–∏–ø—Ç–æ—Ä—ñ–≤
fs = FileSystem(device, max_inodes=500)
```

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ—Å—Ç—ñ–≤:
- **–í—Å—å–æ–≥–æ —Ç–µ—Å—Ç—ñ–≤:** 28 ‚úÖ
- **–ü–æ–∫—Ä–∏—Ç—Ç—è –∫–æ–¥—É:** 89%+ 
- **–ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:** ~2.2 —Å–µ–∫

### –ü–æ–∫—Ä–∏—Ç—Ç—è –ø–æ –º–æ–¥—É–ª—è—Ö:
- `block_device.py`: 96.55%
- `filesystem.py`: 95.00%  
- `inode.py`: 100%
- `open_file.py`: 100%
- `vfs.py`: 89.41%

–î–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç: [TEST_RESULTS.md](TEST_RESULTS.md)

## üöÄ CI/CD

GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
- ‚úÖ –ó–∞–ø—É—Å–∫–∞—î —Ç–µ—Å—Ç–∏ –Ω–∞ Python 3.9-3.12
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—è—î —è–∫—ñ—Å—Ç—å –∫–æ–¥—É (flake8, mypy)
- ‚úÖ –§–æ—Ä–º–∞—Ç—É—î –∫–æ–¥ (black, isort)
- ‚úÖ –ì–µ–Ω–µ—Ä—É—î –∑–≤—ñ—Ç–∏ –ø–æ–∫—Ä–∏—Ç—Ç—è
- ‚úÖ –ü—Ä–æ–≤–æ–¥–∏—Ç—å –±–µ–Ω—á–º–∞—Ä–∫ —Ç–µ—Å—Ç–∏

## üîß –†–æ–∑—Ä–æ–±–∫–∞

```bash
# –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É
make format

# –°—Ç–∞—Ç–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑
make lint

# –¢–µ—Å—Ç–∏ –ø–µ—Ä–µ–¥ –∫–æ–º—ñ—Ç–æ–º
make pre-commit

# –û—á–∏—â–µ–Ω–Ω—è
make clean

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è
make demo

# –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—Ä–æ–µ–∫—Ç
make info
```

## üìà –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

### –ë–µ–Ω—á–º–∞—Ä–∫–∏:
- **–Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –§–°:** ~0.010s
- **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è 50 —Ñ–∞–π–ª—ñ–≤:** ~0.015s  
- **100 –∑–∞–ø–∏—Å—ñ–≤ –ø–æ 1KB:** ~0.050s
- **100 —á–∏—Ç–∞–Ω—å –ø–æ 1KB:** ~0.040s

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–µ–Ω—á–º–∞—Ä–∫–∏
make benchmark
```

## ü§ù –í–Ω–µ—Å–æ–∫ —É –ø—Ä–æ–µ–∫—Ç

1. **Fork** –ø—Ä–æ–µ–∫—Ç
2. –°—Ç–≤–æ—Ä—ñ—Ç—å **feature branch** (`git checkout -b feature/amazing-feature`)
3. **Commit** –∑–º—ñ–Ω–∏ (`git commit -m 'Add amazing feature'`)
4. **Push** –¥–æ branch (`git push origin feature/amazing-feature`)
5. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Pull Request**

### –ü—Ä–∞–≤–∏–ª–∞ –∫–æ–º—ñ—Ç—ñ–≤:
- –£–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ–≤–æ—é
- –ö–æ—Ä–æ—Ç–∫—ñ —Ç–∞ –æ–ø–∏—Å–æ–≤—ñ
- –ê—Ç–æ–º–∞—Ä–Ω—ñ –∑–º—ñ–Ω–∏

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

–†–æ–∑–ø–æ–≤—Å—é–¥–∂—É—î—Ç—å—Å—è –ø—ñ–¥ –ª—ñ—Ü–µ–Ω–∑—ñ—î—é MIT. –î–∏–≤—ñ—Ç—å—Å—è [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

**Student** - –°–∏—Å—Ç–µ–º–Ω–µ –ø—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è  
–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞ —Ä–æ–±–æ—Ç–∞ ‚Ññ4 - –§–∞–π–ª–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞

## üôè –ü–æ–¥—è–∫–∏

- Python Software Foundation
- pytest —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º
- –í–∏–∫–ª–∞–¥–∞—á–∞–º –∫—É—Ä—Å—É

---

<p align="center">
  <b>üéØ –ó—Ä–æ–±–ª–µ–Ω–æ –∑ ‚ù§Ô∏è –¥–ª—è –Ω–∞–≤—á–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è</b>
</p>
